<div
  *ngIf="fusions?.length; else emptyList"
  style="
    display: flex;
    flex-direction: column;
    padding: 16px 4px;
    margin: 0 4px 4px 0;
    flex: 0;
  "
>
  <div *ngIf="selectedPersonae.length">
    <mat-list dense style="margin-bottom: 16px">
      <h3 matSubheader>Selected ({{selectedPersonae.length}})</h3>
      <mat-list-item *ngFor="let persona of selectedPersonae">
        <span matLine><a class="mat-body-2" style="color: #3f51b5; text-decoration: none;" routerLink="../../persona/{{persona.name | lowercase}}">{{persona.name}}</a></span>
        <span mat-line>{{persona.arcanaName}} / {{persona.level}}</span>
        <button mat-icon-button (click)="removeFilter(persona)">
          <mat-icon color="warn">remove</mat-icon>
        </button>
      </mat-list-item>
    </mat-list>
    <a routerLink="../../simulator"
       [queryParams]="simulatorQueryParams()"
       *ngIf="selectedPersonae.length === 3"
       mat-flat-button color="primary"
       style="width: 100%">SIMULATE</a>
  </div>
  <div *ngIf="availablePersonae.length || nameFilters.length">
    <mat-list dense> 
      <mat-form-field appearance="fill" style="display: flex; flex-direction: column;">
        <mat-label>Filter</mat-label>
        <mat-chip-list #tagList aria-label="Filter">
          <mat-chip *ngFor="let tag of nameFilters; let i = index" (removed)="removeNameFilter(i)">
            {{tag}}
            <mat-icon matChipRemove>cancel</mat-icon>
          </mat-chip>
          <input placeholder="Add filter here" 
                 [matChipInputFor]="tagList"
                 [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                 matChipInputAddOnBlur="true"
                 (matChipInputTokenEnd)="addNameFilter($event)">
        </mat-chip-list>
      </mat-form-field>

      <h3 matSubheader>Available ({{availablePersonae.length}})</h3>
      <mat-list-item *ngFor="let persona of availablePersonae">
        <span matLine><a class="mat-body-2" style="color: #3f51b5; text-decoration: none;" routerLink="../../persona/{{persona.name | lowercase}}">{{persona.name}}</a></span>
        <span mat-line>{{persona.arcanaName}} / {{persona.level}}</span>
        <button mat-icon-button (click)="addFilter(persona)">
          <mat-icon color="primary">add</mat-icon>
        </button>
      </mat-list-item>
    </mat-list>
  </div>
</div>

<ng-template #emptyList>
  <div style="padding: 16px;">
    <h3 class="mat-h3">No results.</h3>
  </div>
</ng-template>
