<div *ngIf="persona; else noPersona" style="height: 494px" gdColumns.gt-sm="240px auto" gdGap="16px">
  <mat-card>
    <mat-card-header>
      <mat-card-title>{{ persona.name }}</mat-card-title>
      <mat-card-subtitle
        >{{ persona.arcanaName }} / Level
        {{ persona.level }}</mat-card-subtitle
      >
    </mat-card-header>
    <mat-card-content>
      <mat-chip-list>
        <mat-chip *ngIf="persona.special" color="warn" selected
          >Special fusion</mat-chip
        >
        <mat-chip *ngIf="persona.specialCondition" color="accent" selected>{{
          persona.specialCondition
        }}</mat-chip>
        <mat-chip *ngIf="persona.ultimate" color="accent" selected
          >Ultimate Persona</mat-chip
        >
        <mat-chip *ngIf="persona.keyItem">Key item</mat-chip>
      </mat-chip-list>
    </mat-card-content>
  </mat-card>

  <mat-card class="mat-elevation-z2" *ngIf="persona.special; else nonSpecial" id="special-fusions-container">
    <mat-tab-group>
      <mat-tab label="SPECIAL FUSION">
        <a
          mat-button
          *ngFor="let persona of specialFusions"
          routerLink="..//{{ persona.name | lowercase }}"
          style="padding: 8px; margin-bottom: 0px;"
        >
          <h3
            class="mat-h3"
            style="
              white-space: nowrap;
              margin: 0;
              padding: 0;
              line-height: 1rem;
              font-size: 16px;
            "
          >
            {{ persona.name }}
          </h3>
          <p
            class="mat-caption"
            style="
              white-space: nowrap;
              margin: 0;
              line-height: 1rem;
              font-size: 12px;
            "
          >
            {{ persona.arcanaName }} / {{ persona.level }}
          </p>
        </a>
        <a mat-flat-button color="primary" routerLink="../../simulator" [queryParams]="queryParams()" style="margin-top: 16px; width: 100%">SIMULATE</a>
      </mat-tab>
    </mat-tab-group>


  </mat-card>

</div>

<ng-template #noPersona>
  <p class="mat-body-1">
    Persona not found.
  </p>
  <a routerLink="../.." mat-button color="accent">GO BACK</a>
</ng-template>

<ng-template #nonSpecial>
  <mat-card class="mat-elevation-z2">
    <mat-tab-group>
      <mat-tab label="NORMAL">
        <game-normal-fusions [persona]="persona"></game-normal-fusions>
      </mat-tab>
      <mat-tab label="TRIANGLE">
        <game-triangle-fusions [persona]="persona"></game-triangle-fusions>
      </mat-tab>
    </mat-tab-group>
  </mat-card>
</ng-template>
